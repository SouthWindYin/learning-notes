# ddd实现中的一些原则
项目落地时，分析的顺序应该是 应用层->领域层->基础设施层->ui层
## 用户界面层 user interface
1. controller
2. 第三方接口
## 应用层 application
定义要完成的任务，只提问不回答。不做业务，只提出目标。用例的入口。
## 领域层 domain
领域层分离出来是ddd的核心，只要领域层单独分离出来了，不管其他层怎么分，那这个程序基本可以称为ddd了
1. 一个聚合根对应零个或一个仓库接口
2. 实体的id不一定非要是数据库生成的id，也可以继承自聚合根，只要满足“聚合根id全局唯一，实体id聚合内本地唯一”即可
3. factory有两种，一种是工厂类，一种是工厂方法。当创建某实体这项任务不属于另一个实体的时候，就应该使用单独的工厂类。factory类可以把他看作service，比如创建用户的时候，就最好用UserFactory来创建，返回User。只有订单创建订单项的时候，可以把factory method写进订单的实体里作为一个方法。因为创建订单项的发起者是订单，而创建用户的发起者是外部请求，不是一个已存在的实体。
## 基础设施层 infrustructure
用于实现数据库连接，缓存框架，工具类，技术框架（spring security等）这些与业务无关的技术。让应用层和领域层觉得始终在操作内存，而不是操作技术。
